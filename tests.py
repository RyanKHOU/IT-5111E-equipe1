import unittest
from unittest.mock import patch, mock_open
from Traitement import calcul_places, calcul_temps, calcul_type

class TestParkingFunctions(unittest.TestCase):

    def setUp(self):
        self.test_data = "vehicules_gare.csv"
        
    def test_calcul_places(self):
        places = calcul_places(self.test_data)
        expected = [12, 55, 19, 22, 108] 
        self.assertEqual(places, expected)
    
    def test_calcul_temps(self):
        temps = calcul_temps(self.test_data)
        expected = [('3', 'BF-0513'), ('6', 'OW-9704'), ('12', 'VI-4625'), ('15', 'RC-4153'), ('18', 'HE-6024'), ('22', 'VN-7670'), ('23', 'AS-4581'), ('27', 'MZ-5391'), ('28', 'SF-3379'), ('34', 'SR-9232'), ('41', 'VE-9943'), ('50', 'WZ-5665'), ('58', 'UZ-5739'), ('62', 'VE-6125'), ('76', 'KN-9286'), ('78', 'SB-8369'), ('90', 'UC-0622'), ('91', 'IM-5466'), ('92', 'NL-8855'), ('98', 'VA-1862'), ('99', 'GQ-6699'), ('110', 'YG-9413'), ('111', 'DT-7972'), ('113', 'GP-7074'), ('114', 'FR-7283'), ('120', 'HC-1866'), ('121', 'PP-2195'), ('125', 'WV-0172'), ('126', 'LM-2996'), ('127', 'RW-1489'), ('129', 'JM-4299'), ('130', 'QO-4503'), ('134', 'BF-6257'), ('136', 'CT-7515'), ('140', 'HW-8299'), ('143', 'AD-7035'), ('156', 'LP-2052'), ('157', 'MO-4948'), ('160', 'ND-3537'), ('161', 'PX-6548'), ('165', 'LB-5731'), ('170', 'DQ-3829'), ('172', 'LL-8804'), ('178', 'GE-9795'), ('186', 'FN-9608'), ('196', 'RH-9187')]
        self.assertEqual(temps, expected)
    
    def test_calcul_type(self):
        types = calcul_type(self.test_data)
        expected = [('3', 'BF-0513'), ('6', 'OW-9704'), ('10', 'LU-3860'), ('15', 'RC-4153'), ('23', 'AS-4581'), ('27', 'MZ-5391'), ('28', 'SF-3379'), ('29', 'EG-0920'), ('33', 'WI-9122'), ('36', 'DO-8524'), ('41', 'VE-9943'), ('51', 'TQ-2361'), ('56', 'DU-5687'), ('57', 'ED-7278'), ('58', 'UZ-5739'), ('59', 'XD-5252'), ('62', 'VE-6125'), ('65', 'HX-6506'), ('68', 'JS-7272'), ('76', 'KN-9286'), ('84', 'SO-2664'), ('86', 'WN-9375'), ('88', 'GS-4821'), ('89', 'JF-9019'), ('90', 'UC-0622'), ('91', 'IM-5466'), ('93', 'LR-7159'), ('97', 'JD-7423'), ('98', 'VA-1862'), ('101', 'LV-0914'), ('107', 'RZ-2308'), ('109', 'FJ-1569'), ('110', 'YG-9413'), ('111', 'DT-7972'), ('114', 'FR-7283'), ('119', 'BU-6450'), ('120', 'HC-1866'), ('121', 'PP-2195'), ('122', 'NN-9246'), ('123', 'FE-1321'), ('125', 'WV-0172'), ('127', 'RW-1489'), ('130', 'QO-4503'), ('133', 'QU-5556'), ('134', 'BF-6257'), ('136', 'CT-7515'), ('138', 'MP-8576'), ('140', 'HW-8299'), ('142', 'YT-1389'), ('143', 'AD-7035'), ('145', 'HD-4460'), ('151', 'DK-5711'), ('156', 'LP-2052'), ('158', 'WH-8660'), ('161', 'PX-6548'), ('163', 'OG-4439'), ('167', 'DI-1904'), ('170', 'DQ-3829'), ('172', 'LL-8804'), ('178', 'GE-9795'), ('181', 'PA-5852'), ('183', 'NN-6710'), ('186', 'FN-9608'), ('189', 'UW-3204'), ('199', 'HO-2705')]
        self.assertEqual(types, expected)

if __name__ == "__main__":
    unittest.main()
